@model AgileProject.Models.PostStatusModel
@{
    ViewBag.Title = "Home Page";
}


@*<div class="col-md-12 col-lg-12" style="margin-top:15px;">
	<span class="columnTitle">Name</span>
	<span>Status</span>
	<span>Back in</span>
</div>*@

    @if (ViewBag.LoggedInUser != null)
    {
        <div class="row userInfo">
            <div class="col-xs-3 col-sm-3 col-md-2 col-lg-2 v-align image">
                <img src="http://blogdailyherald.com/wp-content/uploads/2014/10/wallpaper-for-facebook-profile-photo.jpg" class="img-responsive img-rounded listImage" />
            </div>
            <div class="col-xs-6 col-sm-7 col-md-8 col-lg-10 v-align">
                <h11>@ViewBag.teacher.FirstName @ViewBag.teacher.LastName</h11>
                @*<div class="btn-group ddStatus">
                    <a class="btn btn-primary btn-status dropdown-toggle" data-toggle="dropdown" href="#">Change status <span class="caret"></span></a>
                    <ul class="dropdown-menu" id="select">
                        <li><a href="#">Available</a></li>
                        <li><a href="#">Busy</a></li>
                        <li><a href="#">Busy (Students)</a></li>
                        <li><a href="#">Away</a></li>
                    </ul>
                </div>*@

                @using (Html.BeginForm("ChangeStatus", "Home", FormMethod.Post))
                {
                    @Html.AntiForgeryToken()


                    <div class="form-group">
                        <div class="col-md-10 nopadding">
                            <div class="">
                                @Html.DropDownListFor(model => model.statusId, Model.getStatus, new { @class= "btn btn-primary btn-status dropdown-toggle setcolours", @onchange = "this.form.submit();" })
                            </div>
                        </div>
                    </div>
                }
                <br>
                <input type="text" id="min-date" class="inputTime" placeholder="2016/04/05 13:00" />
            </div>
        </div>

    }



    @foreach (AgileProject.Models.Status status in ViewBag.statusList)
    {

          <div class="row listItem available-border status-@status.StatusId">


            <div class="col-xs-3 col-sm-3 col-md-2 col-lg-2 v-align image">
                <img src="http://blogdailyherald.com/wp-content/uploads/2014/10/wallpaper-for-facebook-profile-photo.jpg" class="img-responsive img-rounded listImage" />
            </div>
            <div class="col-xs-6 col-sm-7 col-md-8 col-lg-9 v-align textinfo">
                <h11>@status.Teacher.FirstName @status.Teacher.LastName</h11>
                <h12>@if (@status.StatusId == 10) { 
                    @Html.Raw("Available")
                }
                    else if (@status.StatusId == 20)
                    {
                        @Html.Raw("Busy")
                }
                else if (@status.StatusId == 30)
                {
                        @Html.Raw("Busy")
                    if (ViewBag.LoggedInUser != null)
                    {
                        @Html.Raw("-Students")

                    }
                }
                else if (@status.StatusId == 40)
                {
                    @Html.Raw("Away")
                }



                </h12>
                <h12><b>@status.Date</b></h12>
            </div>
            <div class="calldiv" style="height:100%;">
                @if (status.StatusId == 10)
                {
                    <button type="button" class="btn btn-primary v-align">Call</button>
                }
            </div>
         </div>

    }
   
<script>

    $(document).ready(function () {

            var selText = $(".setcolours option:selected").val();
            console.log("Status: "+selText);
;            if (selText == 10) {
                $('.setcolours').css('background-color', 'rgba(81,202,66,1)');
                $('.setcolours').css('border-color', 'rgb(53, 189, 80)');
                $('.inputTime').css('visibility', 'collapse');
            }
            else if (selText == 20 || selText == 30) {
                $('.btn-status').css('background-color', 'rgb(189, 53, 53)');
                $('.btn-status').css('border-color', 'rgb(202, 66, 66)');
                $('.inputTime').css('visibility', 'visible');
            }
            else if (selText == 40) {
               
                $('.btn-status').css('background-color', 'rgb(202, 201, 66)');
                $('.btn-status').css('border-color', 'rgb(202, 170, 66)');
                $('.inputTime').css('visibility', 'visible');
            }
        });

</script>

